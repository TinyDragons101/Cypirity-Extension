function get_text_data() {
  text_data = document.getElementsByTagName("div");

  text_data_list = [];

  for (var i = 0; i < text_data.length; i++) {
    text_data_list.push(text_data[i].innerText);
    console.log(i, text_data[i].innerText);
  }
  return text_data_list;
}

function get_image_data() {
  image_data = document.getElementsByTagName("img");

  image_data_list = [];

  for (var i = 0; i < image_data.length; i++) {
    image_data_list.push(image_data[i].src);
    console.log(i, image_data[i].src);
  }
  return image_data_list;
}

function get_selected_text() {
  var selectedText = window.getSelection().toString();
  // console.log(1231233);
  if(selectedText !== "") {
    console.log("Selected text: " + selectedText);
    // Do something with the selected text here
  }
}

// get_image_data();
// get_text_data();
// get_selected_text();


// Tạo một thẻ div để chứa cả hai hình ảnh
var containerDiv = document.createElement('div');
containerDiv.style.position = 'fixed';
containerDiv.style.left = '0';
containerDiv.style.bottom = '0';
containerDiv.style.display = 'flex';
containerDiv.style.flexDirection = 'column';

// Tạo một thẻ img để chứa hình ảnh gốc
var imageElement = document.createElement('img');
imageElement.src = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABkAAAAAgCAYAAABKKLTHAAAAAXNSR0IB2cksfwAACBVJREFUeJzt3U1TG/cdwPGvpJUQDyLY9QNMAn5omnhMm2kb+9pODz21576PvoG+k76ATk+dHnroTA7JTMepk7Sxa7uJMRiwjYMFQtiAQEjK4be4QLaTS2ailb6fi0Da3f939vqb/S9IkiRJkiRJkiQNmMInG7/pfd8RkiRJkiRJkiRJ36Xi9x0gSZIkSZIkSZL0XUse1rdPfFEoFACYmxqnUsqej3R78dDI6tYOAO1uj7mpcYDX55w+5qDT/b8Rx9c8fo1vWxOg1zv5AIv99ttvv/3222+//fbbb7/99tvfX/15bifn995+++233377h7nfJ0AkSZIkSZIkSdLAST5YqANQLsWUplSMKcr5+VmSYhmA1eYuANMTVQCebe8BcGslzj3odDg/PxsXTM9ZbsSE5dZyHLNYHwWg043rX3zjVeaax69xfN2sNQFa7YL99ttvv/3222+//fbbb7/99tvfx/15bs/7vbfffvvtt9/+Ye73CRBJkiRJkiRJkjRwkv12AkC5dHDih04XPl6Kicri1iYA89MTADxYbwKw1z6EdPKSbsv1jenPoxdjAPznyQUADjsxc/nFtceZa0L2ullrAthvv/3222+//fbbb7/99ttvv/393Z/n9rzfe/vtt99+++0f5n6fAJEkSZIkSZIkSQMnOfqj14uJybNGDYCPFhL+ejfmI+/NxYjns6cbJ4593qyl/xdZqMfeWgsvGgCs3oqRzr3COQD2i7FUqfi/N8JnrQlkrpu1JsDk6J799ttvv/3222+//fbbb7/99tvfx/15bs/7vbfffvvtt9/+Ye73CRBJkiRJkiRJkjRwkkIrpjL7izELudeKqc0/H1VOTGw4Nj1Z24rpyfG9vWojj+M6d2JvrfpfSgB0fp2ePBmTmPLSKwAKl7uZa3JqUnS0btaaAL+8vGi//fbbb7/99ttvv/3222+//fb3cX+e2/N+7+2333777bd/mPt9AkSSJEmSJEmSJA2cpPTpCACtf7UB6N6MSUlhosfZtV0ASldimrJxN357vbcXMekZXdrl7MH7AGz9LfbyupDcBeBJOmIpPnwJwPhHLwDo1Lq07yTfWBPIXPf0mtXFuF5pw3777bfffvvtt99+++2333777e/n/jy35/3e22+//fbbb/8w9/sEiCRJkiRJkiRJGjhJ8cOYiDR31wDodWMSc+7pDlfvxZvTX3Y6ACz/PaYo7d/GMSMbMYmZud3kysLvARivxfVuvfpDHJNOfwqfbAFQ3I19wlofjDBT+xkA5cI2ABNPmwCZ655e88LH9bje5Iz99ttvv/3222+//fbbb7/99tvfx/15bs/7vbfffvvtt9/+Ye73CRBJkiRJkiRJkjRwku2d2CPrq82YzkytxJvaf7q9x3r63bM/x8HVsZiXjD6KY859GVOb6WqJxy9vA1BiAoCNVkxYqkubcc5InJtMlAGYGbnJuyO/A+CLtT8CcGk9rpe17uk1L1bjN/vtt99+++2333777bfffvvtt7+/+/Pcnvd7b7/99ttvv/3D3O8TIJIkSZIkSZIkaeAka42YiHQPY2+sG2vx/w9nqzy8twfAaDXmJBem4rN9O/bXuvZ2vIW9WilyfzlGLfWt2HOrF8MZJifinGuX49i9VnxfOniLx407AMwX1gGYno4JUda6WWsC/Pu+/fbbb7/99ttvv/3222+//fbb38/9eW7P+72333777bff/mHuj28lSZIkSZIkSZIGSLLfbZ74otuNt6U3moeMjcbfE6MxJ0lKccyl6QoAZydjalMuF7h+NY59Xo+9t5aeHQDwbjr9eXsuNu66/2gXgH+s/YnDTkxufj4+BsBIMxbIWvf0mkkSLfbbb7/99ttvv/3222+//fbbb39/9+e5Pe/33n777bfffvuHud8nQCRJkiRJkiRJ0sBJLs3ERGRlLaY29a2Y4lTKPc5Oxnxkeyf29nrrYkx0rrwZn/9djInOfrvHT94ZB+DSTPy23ohzZqfj/3ISE5lifHBpppK5JpC5btaaR9ex33777bfffvvtt99+++233377+7c/z+15v/f222+//fbbP8z9PgEiSZIkSZIkSZIGTnJjPvbg2mjGpOT96/F/bazI51/sAFDfionLzR/HxOVoonOk1+uxku77VRuPmcpoHMqT5/H9D6Zi4643JuPznSuVzDWBzHWz1gS4MT9uv/3222+//fbbb7/99ttvv/3293F/ntvzfu/tt99+++23f5j7fQJEkiRJkiRJkiQNnKRyNBFJpyqb6T5arf0CnW58101/W04nPefPxCvV2+mb3JuvujxciYnL3HRMeWrjcd3Pv9wDYDb9/sb8BACVpJC5JpC5btaar69jv/3222+//fbbb7/99ttvv/32921/ntvzfu/tt99+++23f5j7fQJEkiRJkiRJkiQNnGRhdR+AVvpm9fuLMbU5UytCOmDpxsCFzx7Em9OvvhkTnSSdwKw3urRjGy62d+I6pVI6gUknMUf7dm02Y0qz1+pmrwmZ62atCWC//fbbb7/99ttvv/3222+//fb3d3+e2/N+7+2333777bd/mPt9AkSSJEmSJEmSJA2cwq+uXe8B9FpH38RHtVKgkP79ohEjnk46TTk/FftoJfFBa79HLz39TPqm92IpTm5sx9SnnB5bSkcu1WqJQrrY6lexP9d7PxpJ146DPn0QUXv73ddrlkonm2pn4lj77bfffvvtt99+++2333777be/P/vz3J73e2+//fbbb7/9w9z/NS4bL20o36MVAAAAAElFTkSuQmCC'; // Thay chuỗi base64 này bằng chuỗi base64 của hình ảnh của bạn
imageElement.style.width = '25%';
imageElement.style.height = '20px';
imageElement.style.imageRendering = 'pixelated';
// Thêm hình ảnh gốc vào thẻ div


// Tạo một div để chứa phia tren
var overlayElement = document.createElement('div');
overlayElement.style.display = 'flex';
overlayElement.style.gap = '0px';

// con cho
var overlayImageElement = document.createElement('img'); 
overlayImageElement.src = 'data:image/png;base64,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'; // Thay đường dẫn này bằng đường dẫn đến hình ảnh phía trên
overlayImageElement.classList.add('gif');
overlayImageElement.style.width = '70px';
overlayImageElement.style.padding = '40px 0px 0px 60px';
overlayImageElement.style.imageRendering = 'pixelated';
// overlayImageElement.style.margin = '0px 0px -15px 0px';

overlayImageElement.style.margin = '25px 0px 0px 0px';

// loi noi
var dogTextContainer = document.createElement('div');
dogTextContainer.style.width = "140px";
dogTextContainer.style.height = '80px';
dogTextContainer.style.position = 'relative';
dogTextContainer.style.zIndex = '100';
dogTextContainer.style.transform = 'translate(-150px, 0)';

var dog_text = "lòng mình sẽ không gửi tiền qua những số tài khoản lạ";
var dogText = document.createElement('div');
dogText.textContent = dog_text;
dogText.style.whiteSpace = 'normal';
dogText.style.textAlign = 'center';

dogTextContainer.appendChild(dogText);


overlayElement.appendChild(overlayImageElement);
containerDiv.appendChild(overlayElement);
containerDiv.appendChild(imageElement);

// Thêm thẻ div chứa cả hai hình ảnh vào body của trang
document.body.appendChild(containerDiv);

// Lắng nghe tin nhắn từ background.js
chrome.runtime.onMessage.addListener(function(message, sender, sendResponse) {
    // Kiểm tra xem tin nhắn có chứa thông điệp không
    if (message.message) {
        const selectedText = window.getSelection().toString();
        let apiCall = new XMLHttpRequest();
        apiCall.open("GET", "http://127.0.0.1:8000/api/scam_prediction/" + encodeURIComponent(selectedText));
        apiCall.send();
        apiCall.onload = () => {

          console.log(apiCall.response);

          ret = JSON.parse(apiCall.response);
          str = 'Khả năng lừa đảo: ' + ret['accuracy'] + '\n';
          str += 'Lý do:\n' + ret['reasons'];

          dog_say_that(str);
        }
    }
});



async function dog_say_that(str) {
  // bong bong
  var bubbleBox = document.createElement('img');
  bubbleBox.id = "bubbleBox"
  bubbleBox.src = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANwAAABjCAYAAADwxm4hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAACxMAAAsTAQCanBgAAAD2ZVhJZk1NACoAAAAIAAcBEgADAAAAAQABAAABGgAFAAAAAQAAAGIBGwAFAAAAAQAAAGoBKAADAAAAAQACAAABMQACAAAABgAAAHIBOwACAAAADAAAAHiHaQAEAAAAAQAAAIQAAAAAAAAASAAAAAEAAABIAAAAAUNhbnZhAFRpbnlEcmFnb25zAAAEkoYABwAAADsAAAC6oAEAAwAAAAEAAQAAoAIABAAAAAEAAADcoAMABAAAAAEAAABjAAAAAEFTQ0lJAAAAeHI6ZDpEQUdDVkM5OUR4azo3LGo6NjIzNzkxMDI3OTU2NTU0Mjk2Nix0OjI0MDQxNDAxACE3NAEAAAYZaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA2LjAuMCI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgICAgICAgICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICAgICAgICAgICB4bWxuczpBdHRyaWI9Imh0dHA6Ly9ucy5hdHRyaWJ1dGlvbi5jb20vYWRzLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIgogICAgICAgICAgICB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyI+CiAgICAgICAgIDx4bXA6Q3JlYXRvclRvb2w+Q2FudmE8L3htcDpDcmVhdG9yVG9vbD4KICAgICAgICAgPGRjOmNyZWF0b3I+CiAgICAgICAgICAgIDxyZGY6U2VxPgogICAgICAgICAgICAgICA8cmRmOmxpPlRpbnlEcmFnb25zPC9yZGY6bGk+CiAgICAgICAgICAgIDwvcmRmOlNlcT4KICAgICAgICAgPC9kYzpjcmVhdG9yPgogICAgICAgICA8ZGM6dGl0bGU+CiAgICAgICAgICAgIDxyZGY6QWx0PgogICAgICAgICAgICAgICA8cmRmOmxpIHhtbDpsYW5nPSJ4LWRlZmF1bHQiPlRoaeG6v3Qga+G6vyBjaMawYSBjw7MgdMOqbiAtIDE8L3JkZjpsaT4KICAgICAgICAgICAgPC9yZGY6QWx0PgogICAgICAgICA8L2RjOnRpdGxlPgogICAgICAgICA8QXR0cmliOkFkcz4KICAgICAgICAgICAgPHJkZjpTZXE+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8QXR0cmliOlRvdWNoVHlwZT4yPC9BdHRyaWI6VG91Y2hUeXBlPgogICAgICAgICAgICAgICAgICA8QXR0cmliOkNyZWF0ZWQ+MjAyNC0wNC0xNDwvQXR0cmliOkNyZWF0ZWQ+CiAgICAgICAgICAgICAgICAgIDxBdHRyaWI6RXh0SWQ+MTJlZTVlN2ItZWY0Ny00ZDE0LWJlYjAtYmQyNmNkZWY3ZDJkPC9BdHRyaWI6RXh0SWQ+CiAgICAgICAgICAgICAgICAgIDxBdHRyaWI6RmJJZD41MjUyNjU5MTQxNzk1ODA8L0F0dHJpYjpGYklkPgogICAgICAgICAgICAgICA8L3JkZjpsaT4KICAgICAgICAgICAgPC9yZGY6U2VxPgogICAgICAgICA8L0F0dHJpYjpBZHM+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDxleGlmOlVzZXJDb21tZW50PgogICAgICAgICAgICA8cmRmOkFsdD4KICAgICAgICAgICAgICAgPHJkZjpsaSB4bWw6bGFuZz0ieC1kZWZhdWx0Ij54cjpkOkRBR0NWQzk5RHhrOjcsajo2MjM3OTEwMjc5NTY1NTQyOTY2LHQ6MjQwNDE0MDE8L3Jk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';
  bubbleBox.style.width = '220px';
  bubbleBox.style.height = '150px';

  // loi noi
  var dogTextContainer = document.createElement('div');
  dogTextContainer.id = "dogTextContainer"
  dogTextContainer.style.width = "200px";
  dogTextContainer.style.height = '120px';
  dogTextContainer.style.position = 'relative';
  dogTextContainer.style.zIndex = '100';
  dogTextContainer.style.transform = 'translate(-200px, 20px)';

  var dog_text = str;
  var dogText = document.createElement('div');
  dogText.textContent = dog_text;
  dogText.style.whiteSpace = 'normal';
  dogText.style.textAlign = 'center';

  dogTextContainer.appendChild(dogText);
  overlayElement.appendChild(bubbleBox);
  overlayElement.appendChild(dogTextContainer);

  await new Promise(r => setTimeout(r, 5000));

  document.getElementById("bubbleBox").remove();
  document.getElementById("dogTextContainer").remove();
};
